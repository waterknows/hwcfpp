WASHINGTON —  Depleted by decades of diminishing reach and struggling to respond to recent anti-union laws, the labor movement has nonetheless found a way to assert itself politically by wreaking havoc on President Obama’s trade agenda, a top priority of his final years in office.On Friday, stiff labor opposition helped derail a measure necessary to clear a path for an up-or-down vote on a sweeping trade deal that the White House is negotiating with 11 other nations bordering the Pacific Ocean.“Labor worked on this long and hard,” Representative Gregory Meeks, a Queens Democrat sympathetic to the emerging deal, known as the Trans-Pacific Partnership (T.P.P.), said on the eve of the vote. “If labor was neutral on this issue, and members were allowed to just make a decision on their own, this bill would not have a problem in passing.”While a broad coalition of unions and liberal activists can claim credit for beating back the president’s favored legislation, the key to labor’s display of force in Congress, according to supporters and opponents of the trade deal, was the movement’s unusual cohesion across various sectors of the economy — including public employees and service workers not directly affected by foreign competition.Labor leaders and their rank and file feared that, whatever the overall benefits to the economy, the emerging deal would accelerate the loss of blue-collar jobs that pay well. “The pay levels people would have to compete with are obscene,” said Larry Cohen, a former Communications Workers of America president, who led the coalition. There is evidence that freer trade has reduced the incomes of those without college degrees.Since March, according to the A.F.L.-C.I.O., union members have held 650 events opposing the legislation. They have made about 160,000 phone calls to members of Congress and written more than 20,000 letters. The federation also produced digital ads, which have received more than 30 million views, aimed at several dozen members of Congress.“We are very grateful for all the activists, families, community leaders and elected officials who worked so tirelessly for transparency and worker rights in international trade deals,” Richard Trumka, the A.F.L.-C.I.O. president, said in a statement. “This was truly democracy in action.”While it is still possible for labor to lose if the House Republican leadership manages to revive the legislation necessary to pass the so-called trade promotion authority this week, the odds for such a reversal are long, analysts say.Labor’s smartest move was lining up opposition to the president’s trade agenda as early as 2013, when the fight was still a distant prospect. “They did a good job getting out and defining T.P.A. early among Democratic House members, really peeling off an enormous number of folks who didn’t have long history or an understanding of the issue, prior to the White House engaging,” said Simon Rosenberg, president of the advocacy group NDN and a supporter of Mr. Obama’s effort.Mr. Rosenberg pointed in particular to a letter labor activists helped circulate late that year, which roughly 150 House Democrats signed. “It was a letter that was going to make it hard to vote for T.P.A. once you signed it,” Mr. Rosenberg said.It wasn’t supposed to be this way. Since 1997, when a major campaign led by labor achieved a rare victory by blocking what was then known as “fast track,” union members’ share of the work force has dropped more than 20 percent. For private sector unions, the share has dropped almost one-third.Apart from that success, though, labor lost most of the fights over trade in recent decades — most notably the North American Free Trade Agreement, which President George H. W. Bush signed with Mexico and Canada and President Bill Clinton pushed through Congress.Back then, the major industrial unions like the steelworkers shouldered most of the responsibility for the effort, rallying their members to pressure lawmakers and saturating newspapers and radio stations with ads.The major service and public sector unions — like those representing teachers, firefighters and hospital workers — officially supported the campaigns but offered little follow-through.“We were really not active,” said Harold Schaitberger, general president of the International Association of Firefighters, who was chief of staff for the union’s president in 1997. Although the firefighters communicated their opposition to members and allies on Capitol Hill, “we didn’t work it with a passion; we didn’t invest resources,” Mr. Schaitberger said.This time around, not only did the firefighters make a considerable investment — producing ads and paying to broadcast them in five congressional districts — but Mr. Schaitberger personally led the effort within the A.F.L-C.I.O. executive council to freeze all donations to members of Congress by the political action committees of the federation and affiliated unions until after the vote on trade promotion authority. (Mr. Schaitberger, who developed the motion, credits Mr. Trumka with helping create almost unanimous support for it.)Mr. Schaitberger acknowledged some apprehension within the labor movement about denying money even to longtime congressional allies, but he argued that it had been the most effective way to persuade friendly members of Congress to pressure wavering Democratic lawmakers. “We wanted to encourage those members to use their influence, their passion for our position, to move some of their colleagues,” he said.Even labor’s opponents marveled at the cohesion unions brought to the fight. John Murphy, senior vice president for international policy at the U.S. Chamber of Commerce, said he was mystified by the position of the Service Employees International Union, which represents two million workers.“None of these workers are in any way negatively affected by competition with imports,” said Mr. Murphy. “Yet S.E.I.U. will be there, showing solidarity.”The across-the-board mobilization by labor unions reflected two pivotal developments since the late 1990s. First was the dawning realization that even public sector workers who appear to be insulated from global competition could ultimately feel its dislocating effects. Mr. Schaitberger said the firefighters had learned all too well that deindustrialization leads to urban decay and declining property values, which can increase demand for public services while it drains cities of the revenue to pay for them.More recently, the public sector unions, under increasing assault from Republicans in Congress and in several big states like Wisconsin, Michigan and Indiana, found that the rapid decline of industrial unions had left them politically vulnerable as well.“It’s whatever that version of the statement was in Germany — ‘First they came for the Gypsies, then they came for me,’ ” said Andrew L. Stern, international president of S.E.I.U. until 2010. “It was sort of capitalism versus the private unions. Now it’s political leaders against public unions, and there’s no one to temper it.”Labor leaders and activists argue that when private sector workers belong to unions and have pensions and rising wages, they are more sympathetic to public sector workers who desire the same. But when private sector workers lose these benefits, they become more hostile to what they see as special treatment for their counterparts on the government payroll.A growing sense of existential fear explains the ferocity of labor’s assault on otherwise friendly Democrats. In recent days, after Representative Kathleen Rice of Long Island reversed her previous opposition to trade promotion authority, the A.F.L.-C.I.O. paid for an advertisement in her district that questioned her character, not just her position on a procedural trade vote.“On Saturday, Rice flip-flopped,” a narrator in the ad intoned. “Actions speak louder than words. Why should we ever trust Kathleen Rice again?”Ms. Rice, a former prosecutor, questioned the wisdom of labor’s tactics. “Do I think it’s wise to spend their members’ hard-earned money attacking someone who agrees with them on just about every other issue, in an election where my opponent will no doubt be anti-union, anti-workers’ rights?” she said in an interview. “No, I don’t.”Such hard-nosed tactics might previously have alienated other Democratic constituency groups. In the last few years, however, the hostility of the industrial unions toward trade deals has spread to a growing roster of liberal activists and has even captured the support of some wealthy donors who once advocated increased trade and globalization but now view the latest deals as mostly a sop to big business.Moreover, labor leaders believed that they had license to attack wayward Democrats in the House, where Republicans are entrenched in power, even if it meant losing a few generally friendly votes.“Losing a couple seats in the House is a lot different than losing them in the Senate,” said Mr. Stern, the former S.E.I.U. leader. “It is better to punish than it is to reward.”