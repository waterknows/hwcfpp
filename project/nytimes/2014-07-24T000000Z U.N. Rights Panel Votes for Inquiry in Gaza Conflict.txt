GENEVA — The United Nations Human Rights Council voted to establish an inquiry into human rights violations in Gaza and the Israeli-occupied Palestinian territories at a special session on Wednesday in which the top human rights official, Navi Pillay, said Israel and Hamas had likely committed war crimes with indiscriminate attacks on civilians.Twenty-nine of the council’s 47 members voted for a resolution calling for the creation of a commission of inquiry to look at “all violations” of international law, with only the United States voting against and with 17 states abstaining, 10 of them European.The United States was working intensively to secure an immediate cessation of hostilities “but this resolution will not help us achieve that goal,” Keith M. Harper, the American ambassador to the council, told members before the vote.The inquiry created by the council was a “biased and political instrument” he said, adding: “Once again, this council has failed to address the situation in Israel and in the Palestinian territories with any semblance of balance.”Ms. Pillay had opened the session citing Israeli airstrikes on civilian homes and an attack on the Al Aqsa hospital two days earlier as examples of action where there seemed to be a “strong possibility” that international law had been breached “in a manner that could amount to war crimes.”These incidents and the high proportion of civilian casualties, who made up almost three-quarters of the nearly 700 Palestinians killed since the fighting started on July 8, “belies the claim that all necessary precautions are being taken to protect civilian lives,” she said.Ms. Pillay also condemned indiscriminate attacks on civilians by Hamas and other Palestinian armed groups in Gaza who had fired rockets and mortar rounds into Israel, calling the attacks a clear breach of international law.“The actions of one party do not absolve the other party of the need to respect its obligations under international law,” said Ms. Pillay.Neither side had acted seriously to investigate or hold anyone to account for human rights violations, creating a climate of impunity that invited further abuses, she said.“We have a humanitarian disaster,” Riad Maliki, the foreign minister for the Palestinian Authority, told the council. He contended that Israel had acted with impunity and that without an accounting, “the credibility of the U.N., the international community and the human rights system will be jeopardized.”Israel’s United Nations ambassador in Geneva, Eviatar Manor, criticized what he called the council’s “ritual of naming and shaming Israel” and countered that “there can be no moral symmetry between a terrorist aggressor and a democracy defending itself.”In a comment directed at Ms. Pillay, he added that “in the protection of the human rights of Israelis, this council and you, madam, have failed dismally.”