UNITED NATIONS — President Obama on Tuesday laid down a retooled blueprint for America’s role in the strife-torn Middle East, declaring that the United States would use all of its levers of power, including military force, to defend its interests, even as it accepted limits on its ability to influence events in Syria, Iran and other countries.In a wide-ranging speech to the General Assembly that played off rapid-fire diplomatic developments but also sought to define what he called a “hard-earned humility” about American engagement after 12 years of war, Mr. Obama insisted that the United States still played an “exceptional” role on the world stage. Turning inward, he said, “would create a vacuum of leadership that no other nation is ready to fill.”Mr. Obama embraced a diplomatic opening to Iran, saying he had instructed Secretary of State John Kerry to begin high-level negotiations on its nuclear program. He called on the Security Council to pass a resolution that would impose consequences on Syria if it failed to turn over its chemicals weapons.And he delivered a pitch for peace talks between Israel and the Palestinians, talks that have restarted at the prodding of Mr. Kerry.Hours later, Iran’s newly elected president, Hassan Rouhani, echoed the call for diplomacy, telling the General Assembly that “we can arrive at a framework to manage our differences.” But Mr. Rouhani said Iran would insist on its right to enrich uranium, and he warned Mr. Obama to resist influence from “warmongering pressure groups.”Mr. Rouhani, who had mounted an aggressive charm offensive in the weeks before arriving in New York, also declined a chance to shake hands with Mr. Obama — avoiding a much-anticipated encounter that would have bridged more than three decades of estrangement between the leaders of Iran and the United States.In their speeches, both leaders balanced their ideals as statesmen with their imperatives as politicians. But for Mr. Rouhani, a handshake may have proved too provocative for hard-line constituencies back home. At the end of a day of drama and dashed expectations at the United Nations, the spotlight swung back to the grinding work of diplomacy that awaits both nations.In the morning, it was a somewhat diminished American leader who faced a skeptical audience of world leaders here. After first threatening, then backing off, a military strike against Syria, and now suddenly confronting a diplomatic opening with Iran, Mr. Obama has employed a foreign policy that has at times seemed improvisational and, in the view of many critics, irresolute.The president acknowledged as much, saying his zigzag course on military strikes had unnerved some allies and vindicated the cynicism of many in the Middle East about American motives in the region. But he said the bigger threat would be if America withdrew altogether.“The danger for the world is that the United States, after a decade of war, rightly concerned about issues back home, and aware of the hostility that our engagement in the region has engendered throughout the Muslim world, may disengage,” Mr. Obama said. “I believe that would be a mistake.”Despite a war-weary public and its declining reliance on Middle Eastern oil, the United States would continue to be an active player in the region, Mr. Obama insisted, defending its interests; advocating for democratic principles; working to resolve sectarian conflicts in countries like Iraq, Syria and Bahrain; and, if necessary, intervening militarily with other countries to head off humanitarian tragedies.“We will be engaged in the region for the long haul,” Mr. Obama said in the 40-minute address. “For the hard work of forging freedom and democracy is the task of a generation.”For a president who has sought to refocus American foreign policy on Asia, it was a significant concession that the Middle East is likely to remain a major preoccupation for the rest of his term, if not that of his successor. Mr. Obama mentioned Asia only once, as an exemplar of the kind of economic development that has eluded the Arab world.Much of Mr. Obama’s focus was on the sudden, even disorienting flurry of diplomatic developments that began after he pulled back from the brink of ordering a strike on Syria last month. He said Iran’s overtures could provide a foundation for an agreement on its nuclear program, but he warned that “conciliatory words will have to be matched by actions that are transparent and verifiable.”Referring to the moderate statements of Mr. Rouhani, and an exchange of letters with him, Mr. Obama sounded a cautiously optimistic tone about diplomacy. “The roadblocks may prove to be too great,” he added, “but I firmly believe the diplomatic path must be tested.”Similarly, Mr. Obama pushed negotiations at the Security Council on a Russian plan to transfer and eventually destroy President Bashar al-Assad’s chemical weapons. But he faulted Russian and Iran for their support of Mr. Assad, saying it would further radicalize Syria. And he claimed it was only the American threat of military action against Syria that had set in motion these diplomatic efforts.“Without a credible military threat, the Security Council had demonstrated no inclination to act at all,” the president said. “If we cannot agree even on this, then it will show that the U.N. is incapable of enforcing the most basic of international laws.”The president spoke immediately after Brazil’s president, Dilma Rousseff, delivered a blistering denunciation of the United States over reports that the National Security Agency monitored e-mails, text messages and other electronic communications between Ms. Rousseff and her aides. Last week, Ms. Rousseff canceled a state visit to Washington to signal her displeasure with the N.S.A. surveillance, the most significant diplomatic fallout from revelations that have also strained relations with other allies, like Mexico and Germany.Mr. Obama took note of these grievances, saying the United States was rethinking its surveillance activities as part of a broader recalculation that included restricting the use of drones, and transferring prisoners out of the military prison at Guantánamo Bay, Cuba, and ultimately shutting it down. His words echoed a speech he delivered last spring on the need for the United States to get off “perpetual war footing.”“Just as we reviewed how we deploy our extraordinary military capabilities in a way that lives up to our ideals,” the president said, “we have begun to review the way that we gather intelligence, so as to properly balance the legitimate security concerns of our citizens and allies, with the privacy concerns that all people share.”Mr. Obama reaffirmed his support for another perennial American project: bringing Israelis and Palestinians together. With talks starting again between Prime Minister Benjamin Netanyahu of Israel and the Palestinian Authority leader, Mahmoud Abbas, Mr. Obama appealed for support.“The time is now ripe for the entire international community to get behind the pursuit of peace,” he said. “Already, Israeli and Palestinian leaders have demonstrated a willingness to take significant political risks.”Mr. Obama also sent a warning to Egypt’s military-backed government that it would lose American support if it continued to crack down on civil society. His message was viewed positively by the Egyptian state news media, despite the criticism, because they claimed he credited the government with taking steps toward democracy.“We will continue support in areas like education that benefit the Egyptian people,” he said. “But we have not proceeded with the delivery of certain military systems, and our support will depend upon Egypt’s progress in pursuing a democratic path.”For all his caveats, Mr. Obama left no doubt that the United States would use its political, economic and, if necessary, military power in the Middle East. Acknowledging that his position on Syria had prompted uneasiness in the region, he insisted that the United States would still act to protect its interests.The president also issued a fervent call for countries to intervene when necessary — as the United States did in Libya, but conspicuously did not do in Syria.“Sovereignty cannot be a shield for tyrants to commit wanton murder, or an excuse for the international community to turn a blind eye to slaughter,” he said.