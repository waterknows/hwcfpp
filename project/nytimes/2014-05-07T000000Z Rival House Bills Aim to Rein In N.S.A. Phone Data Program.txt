WASHINGTON —  Senior members of the House Judiciary and Intelligence committees have agreed on similar but rival bills that would restrict the National Security Agency’s ability to collect Americans’ phone call data in bulk.The Judiciary Committee is expected on Wednesday afternoon to mark up and pass a compromise version of a bill sponsored by Representative James Sensenbrenner, Republican of Wisconsin. It has the support of several top lawmakers of both parties on that panel. The Intelligence Committee is expected to mark up and pass a similar bill on Thursday, staffers said.Both bills would curtail the government’s ability to collect bulk records about Americans. In particular, the bills are aimed at ending the N.S.A. program that systematically gathers logs about Americans’ phone calls and stores them for at least five years. Instead, they would authorize a system in which the bulk records would stay with the phone companies, and the government could obtain records of callers up to two links from a suspect.Neither bill would require phone companies to hold onto such records longer than they normally would do — in the case of landline phone records, up to 18 months. President Obama has endorsed the broad outlines of such a plan.Still, some important differences remain. The data-collection program authorized by the Judiciary Committee bill could only be used for counterterrorism purposes, in line with the existing N.S.A. program. The Intelligence Committee bill would expand the allowable uses to include the detection of espionage, the proliferation of weapons of mass destruction and other kinds of national-security threats.The Judiciary Committee bill would also require a judge on the Foreign Intelligence Surveillance Court to agree that a phone number meets a standard of suspicion before it could be used, except in emergencies. The Intelligence Committee bill currently uses an after-the-fact model of judicial review, although staffers said there is talk of changing that.There had been many more differences between earlier versions of the two committees’ bills, but those differences have narrowed under a bipartisan agreement negotiated in the Judiciary Committee and unveiled on Monday.The Judiciary Committee dropped a plan to create a “special advocate,” vetted by the independent Privacy and Civil Liberties Oversight Board, to represent the public in classified proceedings before the secret surveillance court; the advocate would have the power to appeal a ruling in favor of a government request for surveillance powers. Instead, the modified bill would allow the court, if it chose to, to appoint an advocate who would lack the power to file appeals.Also, the Judiciary Committee bill dropped language that might have been interpreted as limiting searches to instances where the F.B.I. had an already open, formal investigation. And it dropped language that would have allowed telephone and Internet companies to make more detailed public reporting about how often the government collects data or content from them using a national-security court order or an administrative subpoena called a national-security letter, although a staffer said there was talk of putting that back in.While they were not happy with changes that they think weakened Mr. Sensenbrenner’s bill, several civil liberties groups praised its increased prospects for passage. The Center for Democracy and Technology, for example, said that the bill would still resolve the major concerns with bulk collection that it and other privacy groups had raised.