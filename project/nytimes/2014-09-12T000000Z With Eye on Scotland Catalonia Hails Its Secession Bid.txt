BARCELONA —  The world’s attention may be riveted on Scotland and its secessionist drive, but Thursday was Catalonia’s turn, as hundreds of thousands of flag-waving citizens rallied in the streets in what Catalan leaders hoped would be the prelude to the region’s own vote on independence from Spain.In central Barcelona, Catalans formed a giant V — for vote and victory — by filling two of the city’s main avenues and draping themselves in the red-and-yellow colors of the Catalan flag. The demonstration coincided with Catalonia’s National Day, but it had all the feeling of a pre-independence celebration.As Scotland’s push for independence enters its homestretch before a referendum on Sept. 18 on whether to break from the United Kingdom, Catalonia’s secessionist drive, too, has reached a critical phase with its own vote approaching on Nov. 9. The outcome is likely to be influenced by what the Scots decide.But unlike in Scotland, where British leaders have belatedly tried to persuade Scots not to leave while not threatening to block the vote, Catalonia’s secessionist drive is veering dangerously toward a constitutional crisis.The mass rally on Thursday came as Artur Mas, the president of the regional government, insisted that the vote in Catalonia — Spain’s economic powerhouse — would go ahead as planned, despite opposition from the central government in Madrid.Catalonia’s regional Parliament is set to give the go-ahead for the vote later this month. That green light is expected to be struck down by Spain’s constitutional court, however, and Prime Minister Mariano Rajoy has repeatedly warned that any such vote would violate Spain’s constitution.Mr. Mas would then face the difficult choice of whether to go ahead with an illegal vote or delay the vote to allow for further negotiations with Mr. Rajoy. He could also call early elections in Catalonia — with the risk that more hard-line secessionist politicians would oust him and his Convergence party from power.Mr. Mas is already struggling with a major fraud scandal centering on Jordi Pujol, the patriarch of Catalan politics and founder of the Convergence party who ran the regional government for 23 years.In July, Mr. Pujol admitted committing tax fraud by hiding money offshore. He has since delayed appearing before lawmakers, but at least three of Mr. Pujol’s adult children are also under investigation on suspicion of financial crimes ranging from money laundering to bribery. One of them is expected to appear before Spain’s national court on Monday.Mr. Rajoy, however, is in an increasingly difficult situation, too. Scotland is now “causing headaches in Madrid,” particularly since the British government recently offered concessions to sway Scotland’s voters, said Antonio Roldán, an analyst at the Eurasia Group in London.“London is offering major devolution of powers to the Scots to incentivize them to remain part of the union, further complicating Rajoy’s tougher, noncooperative strategy,” he said.Still, Mr. Rajoy also has concerns over whether concessions to Catalonia would trigger similar demands from other regions, led by the Basque Country, which has only recently emerged from decades of separatist violence.Catalonia’s 7.5 million people represent about 16 percent of the Spanish population and account for 19 percent of Spain’s gross domestic product. The Basque region, with 2.2 million people, is Spain’s richest region per capita, accounting for 6 percent of G.D.P.“We’re fed up with being told that we’re in a democracy but can’t even give our opinion,” said Montse Bosch, a kindergarten teacher who traveled from Vilafranca del Penedès, about 30 miles from Barcelona.Ms. Bosch warned that Madrid’s refusal to allow a vote risked inciting “civil disobedience.” Still, she said that Thursday’s peaceful demonstration showed that the secessionist push was not driven by extremists. “We’ve got nothing against Spain, but just want it as our friendly neighbor,” she said.Mr. Rajoy and Mr. Mas have been at loggerheads for two years, after Mr. Rajoy refused to give Catalonia a more favorable fiscal treatment, but the two met last July in what Mr. Mas described as “a climate of open dialogue.”In a speech on Thursday, Mr. Mas said that he regretted Mr. Rajoy’s stonewalling, but “we’re ready to vote on Nov. 9.” The “V” demonstration, Mr. Mas said, was not an act of provocation by Catalans toward the Spanish state but proof that “we want to vote, we are a nation and we want to decide our political future.”Some demonstrators said that the Catalan government had lost much of its credibility because of its links to Mr. Pujol, whom Mr. Mas succeeded as party leader. The Pujol scandal “is a negative for sovereignty, but all it really shows is that politicians have been corrupt everywhere,” said Josep Maria Bru Vea, a firefighter who attended the demonstration along with his family.Antonio Lopéz, a pensioner, was among many people wearing the official “V” T-shirt, with the slogan, “Now is the Time.” He said the T-shirt cost 15 euros, but he had given €20 because “this is a good cause.”Mr. Lopéz, however, admitted that the time might still be some years away, given Madrid’s veto. “I don’t think that I will get to see an independent Catalonia, but I’m also here to make sure that at least my grandchildren get to enjoy it.”