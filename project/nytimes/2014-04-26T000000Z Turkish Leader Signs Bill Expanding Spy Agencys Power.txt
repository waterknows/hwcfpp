ISTANBUL —  Turkey’s president signed legislation on Friday that granted more authority to the national spy agency, a measure that critics say will bolster Prime Minister Recep Tayyip Erdogan’s control over state institutions.The legislation, which passed in Parliament last week after Mr. Erdogan’s party won an indisputable victory in March local elections, allows the agency, the National Intelligence Organization, to have access to public and private information without court orders and to conduct foreign operations in coordination with the military. It also gives the agency broad immunity from prosecution.Government officials defended the comprehensive changes, saying they would make the agency more efficient and protect personnel doing their duties. They said the legislation provided long overdue overhauls of a law that dates to 1984.Critics of the government, however, said the changes would turn the spy agency, known by the initials of its Turkish name, M.I.T., into a formidable weapon for Mr. Erdogan in his struggle against a pro-Islamic network led by Fethullah Gulen, a cleric and former ally who lives in Pennsylvania.Mr. Erdogan has repeatedly contended that Mr. Gulen was behind a corruption investigation that has shaken the government. Mr. Gulen has strongly denied having any connection to the inquiry, which has ensnared four ministers as well as members of Mr. Erdogan’s inner circle.Democracy activists had urged President Abdullah Gul to veto the legislation, which they said not only circumvented the constitutional principle of separation of powers, but also contradicted regulations in the European Union, which Turkey had long aspired to join.The law would allow the agency to get access to the databases of private companies and public institutions without a court order. It also calls for prison terms for publishers who print agency documents or those who broadcast them.Twitter and YouTube were blocked in Turkey last month after leaked telephone conversations that seemed to imply widespread corruption among government officials and pro-government business leaders were circulated on the social networks. The ban on Twitter was lifted early this month after critics successfully appealed to the highest court, Constitutional Court.Mr. Erdogan has publicly railed against social networks as menaces to Turkish society, although officials also said that the bans were intended to protect citizens’ privacy.“Turkey is rapidly evolving into a lawless regime, which is single-handedly run by an authoritarian leader,” said Sezgin Tanrikulu, a deputy of the opposition Republican People’s Party, after the legislation was approved in Parliament last week.Mr. Tanrikulu’s party prepared to appeal to the Constitutional Court, which this month partially upended a government-backed bill that tried to restructure an important judiciary body in reference to the separation of powers.In a speech on Friday, the president of the court, Hasim Kilic, called upon leaders to respect the rule of law and said his court acted “in compliance with the Turkish republic’s Constitution and universal principles of law.”