BRUSSELS — Despite bitter opposition from Prime Minister David Cameron of Britain, European Union leaders voted on Friday to name Jean-Claude Juncker as the next president of the bloc’s powerful bureaucracy, bringing an end to a struggle that had pitted some of the group’s top leaders against each other.The vote for leadership of the European Commission came after Mr. Cameron made a last ditch plea over lunch in Brussels with leaders to select someone other than Mr. Juncker, the former prime minister of Luxembourg who played a central role in steering Europe through its long debt crisis.Previously, European leaders always selected the president of the Commission by consensus.Mr. Cameron and Viktor Orban, the prime minister of Hungary, were the only two to vote against the nomination of Mr. Juncker, who still must be approved by the European Parliament in a vote expected to be held on July 16.Joseph Daul, the leader of the European People’s Party, which backed Mr. Juncker, said he was “confident” of a majority for their candidate in Parliament. Mr. Juncker would seek “the widest-possible consensus,” Mr. Daul said.Mr. Cameron had strongly objected to Mr. Juncker as someone unlikely to curb the kind of bureaucratic overreach that many European voters — not least those in Britain — rejected in elections in May. Mr. Cameron had also complained that Mr. Juncker was being foisted on leaders by the European Parliament in a power grab that threatened to permanently downgrade the influence of national governments in Brussels.“This is a bad day for Europe,” Mr. Cameron told a news conference following the summit meeting. “This whole process has simply reinforced my conviction that Europe needs to change,” he said, adding that he was not the sort of person to “back down when a vote goes against you.”But the outcome was a clear sign that member states would side with Germany, the biggest economy in the European Union and its most influential member, over Britain, which has indicated that it could leave the 28-member bloc in coming years.In the longer term, the failure of the British to get their way in Brussels could raise pressure on Mr. Cameron to begin advocating a departure from the European Union. Mr. Cameron has previously said that his goal was to win reforms in areas like immigration and to slim down the responsibilities of the European Union, allowing Britain to remain in the bloc on revised terms.Mr. Cameron said the job of keeping Britain in a reformed European Union has become harder. “The battle to reform this organization is going to be longer and tougher,” he said.Angela Merkel, the German chancellor, said in a separate news conference that Mr. Juncker had “European experience” for the job. But she also was “ready to address British concerns” about the European Union, including the selection process that had so riled Mr. Cameron.Whether Britain remains a formal member of the bloc is likely to be a key issue in the British general election campaign next year. Mr. Cameron has previously pledged to hold a referendum in 2017 on whether Britain should remain a member if he wins re-election.The decision about who should lead the organization’s most important agency was always going to be an acrimonious process after populist upstart parties on the right and left surged in legislative elections in May.The drubbing of mainstream parties in the voting for the European Parliament by parties like the National Front in France and the U.K. Independence Party put into stark relief the challenge facing the project to integrate the Continent, which began in the wake of World War II.For Daniela Schwarzer, the director of the Europe Program at the German Marshall Fund, “the struggle over the new European Commission president is one about the democratic future of the E.U.” and “the battle over Juncker shows how real it all has become.”In May, European Union leaders, including Ms. Merkel, said they would look at a range of candidates for president as part of a process in the union’s treaties and to take other issues into account, like placing more women in top jobs and accommodating the wishes of each member government in the bloc.But Ms. Merkel faced strong domestic pressure to name Mr. Juncker after her own party had backed him as a leading candidate during the election campaign, and after Mr. Juncker’s party won a majority during elections to the European Parliament in May. Many Germans warned that ignoring the results of the elections by choosing an outside candidate could create further resentment of Brussels.Sweden and the Netherlands had also been skeptical about the process for nominating Mr. Juncker. But their leaders also voted for him on Friday, adding to the impression that Mr. Cameron had been left in the lurch.Asked whether Ms. Merkel had let him down over Mr. Juncker, Mr. Cameron said “obviously we were on opposing sides today and that’s a matter of regret.”Ms. Merkel declined to discuss any assurances she gave Mr. Cameron to seek alternatives to Mr. Juncker, saying she did not comment on such “internal discussions.”Under the Lisbon Treaty, which went into force in 2009, European Union leaders are responsible for naming the candidate, whom the Parliament then elects. But parties in the European Parliament outmaneuvered the leaders by putting forward their own candidates for the top job in Europe.“There is no longer any going back on this leap for democracy,” said Pervenche Berès, a French member of the European Parliament, immediately after the vote on Friday. “For the first time the president of the European Commission will take his legitimacy from citizens,” she said.