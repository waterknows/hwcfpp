NAIROBI, Kenya —  The return of the long-lost son, as President Obama is widely seen by Kenyans, had all the elements of a family reunion. They hugged, they caught up, they talked about shared interests, they agreed they should get together more often, and they had their sibling spats.In his first visit as president to his father’s home country, Mr. Obama struck a relentlessly upbeat tone, declaring, “Africa is on the move”; praising progress toward democracy and economic growth; and marveling over the changes he saw on the streets of this locked-down capital.But he found himself at odds with his hosts on human rights and same-sex marriage and gingerly tried to nudge them to change their ways. At a news conference, he said the fight against terrorism in Kenya should not be used to justify a crackdown on dissent and argued that no nation should discriminate against gays and lesbians, comparing it to the era of segregation of African-Americans.“If somebody is a law-abiding citizen who is going about their business and working in a job and obeying the traffic signs and doing all the other things good citizens are supposed to do and not harming anybody, the idea that they are going to be treated differently or abused because of who they love is wrong,” Mr. Obama said. “Full stop.”Standing to his left on the lush lawn of the colonial-era State House, President Uhuru Kenyatta accepted the advice on human rights without argument, saying Kenya was trying to improve its handling of security and liberty. “This issue of terrorism is new to us,” he said, “and as it is new, we learn with each and every step.”But in a country where homosexuality is widely condemned, he flatly rejected Mr. Obama’s views on gay rights. “There are some things we must admit we don’t share; our culture, our society don’t accept,” he said. “It is very difficult for us to be able to impose on people that which they themselves do not accept.”The disagreement was quickly papered over, though, as both Mr. Obama and Kenyans focused on the historic nature of his visit. While Mr. Obama came here three times before taking office, many Kenyans had bristled that he waited until the seventh year of his presidency to return.He joked in public events that he had not wanted to make the rest of Africa jealous by coming too soon, but expressed a strong connection to Kenya. “I’m proud to be the first U.S. president to visit Kenya, and obviously, this is personal for me,” he said at a business forum. “There’s a reason why my name is Barack Hussein Obama. My father came from these parts and I have family and relatives here. And in my visits over the years, walking the streets of Nairobi, I’ve come to know the warmth and the spirit of the Kenyan people.”He held out Kenya as a model in a fast-growing region. “Kenya is leading the way,” Mr. Obama said. “When I was here in Nairobi 10 years ago, it looked very different than it does today.”He added, however, that the greatest threat to continued growth in Kenya is the scourge of corruption, found here from the local police officer to the highest politicians. Mr. Obama and Mr. Kenyatta released a 29-point plan for fighting corruption in Kenya. They also signed an “action plan” to bolster Kenya’s security in its fight against the Shabab, the Qaeda affiliate based in Somalia.Mr. Obama could not get out of his armored car to wander the streets as in the past. Instead, his most intimate encounter with Kenya beyond its official leadership came during a dinner Friday at his hotel with three dozen members of his extended family.Over a buffet of Kenyan food, including chicken, fish and beef, the president heard his relatives talk about life in Kenya, and he told them a little about life in the White House. Some of them told Mr. Obama they wished he could spend more time in Kenya, and with them. He later said he spent part of the meal “begging for forgiveness” that his schedule did not allow it. “Once I’m a private citizen, I will have more freedom to reconnect,” he said.Said Obama, his uncle, said his relatives understood. “He explained to the family members the nature of his work,” Said Obama said in an interview. “But he said his mind is always with them, his heart is always here.”The president generally has only remote connections to most relatives living here. He is closest to his half sister, Auma Obama, who hosted him for his first visit as a young man. Also present on Friday night was his step-grandmother, known as Mama Sarah but whom he calls Granny.His Kenyan relatives have not been regular visitors to the White House. The only Obamas who show up in publicly released White House visitor logs are Said Obama and Sarah Obama, an aunt, who have visited just once in more than six years, and the president’s half brother Abongo, also known as Roy, who has visited three times.Indeed, the president acknowledged that some at dinner here on Friday were strangers. “In these extended families, there are cousins and uncles and aunties that show up that you didn’t know existed but you’re always happy to meet,” the president said with a laugh. “And there were lengthy explanations in some cases of the connections. But it was a wonderful time.”Mr. Obama had a long day of activities. He addressed the sixth annual Global Entrepreneurship Summit meeting, laid a wreath at a memorial to the victims of the 1998 bombing of the United States Embassy here and attended a state dinner in the evening, where he was serenaded in English and Swahili by a group that sang a song called “Coming Home.” In his toast, Mr. Obama joked that critics back home no doubt believed he had come “to look for my birth certificate,” adding, “That is not the case.”He made no mention of Mr. Kenyatta’s indictment for crimes against humanity. Mr. Kenyatta and his deputy, William Ruto, were charged in the International Criminal Court with instigating violence after disputed 2007 elections that killed more than 1,000. The case against Mr. Kenyatta was dropped in December, but the charges stand against Mr. Ruto, who met with Mr. Obama.Mr. Obama referred obliquely to that violence but praised a revised constitution adopted afterward, and said the subsequent election in 2013 that elevated Mr. Kenyatta and Mr. Ruto “showed growth in the election process.”He defended his Power Africa initiative, a multibillion-dollar effort announced two years ago that has produced little electricity for a power-starved continent. “I would just point out that if you wanted to start a power plant in the United States, it doesn’t take a year to get that done,” he said.Rejecting comparisons to President George W. Bush, whose efforts to curb AIDS and malaria in Africa are warmly remembered, he said, “This isn’t a beauty contest between presidents.”The excitement at his visit was palpable from the gated homes with manicured lawns in grand old wealthy neighborhoods like Muthaiga and Karen to the slums of Kibera, where sewage runs in the street and families live in mud and tin shacks. “Obama is a source of inspiration to many,” said Babu Owino, president of the Kenya University Students Organization. “The students here love him so much. They are die-hard fans. When they look at his background, he’s someone they are able to identify with.”So much so that before the visit, Mr. Owino wrote to the American ambassador here claiming at least 17 students had threatened to commit suicide if Mr. Obama did not visit the University of Nairobi. (The president did not, but no suicides were reported.)Mr. Obama transcended the tribal differences that have divided society. Mr. Obama’s family is Luo while Mr. Kenyatta and his ruling elite are Kikuyu. But Solomon Wekesa, 31, a security guard who himself is Luya, said it did not matter to most Kenyans.“In Obama, they see a man who does not see tribe, a man who is an open man,” he said. “He sees Kenya as one nation.”Others hoped the visit would bring change. “I want Obama to push for reforms in Kenya’s fight against corruption to enable the poor access to a better livelihood,” said Nancy Ayako, 21, who lives in the Kibera slum settlement. “There are so many young people who have been marginalized, like slum dwellers.”But expectations may have surpassed reality. For Rogers Mogaka, a community organizer, Mr. Obama’s visit came too late. “Why now?” he asked. “Look, he is not coming here to meet with the common man on the street.”He added, “There are a number of issues that we think need to be addressed that affect the common man in Kenya.”