WASHINGTON — After years of a tortuous relationship with Ali Abdullah Saleh, the strongman who was president of Yemen for more than two decades, Obama administration officials hoped to bolster the credibility at home of Mr. Saleh’s successor, Abdu Rabbu Mansour Hadi, seen as critical to the American fight against Al Qaeda in the Arabian Peninsula.But the administration continues to have trouble with those efforts.Now, the news that a United States Special Operations commando and a Central Intelligence Agency officer shot and killed two armed Yemeni civilians who tried to kidnap them has put Mr. Hadi and his government, which has been cooperating with American counterterrorism efforts in Yemen, in the center of a storm of resentment among Yemenis who have complained about their government’s collaboration with American drone strikes.The issue is important because Yemen has increasingly become the heart of the American fight against terrorism. A majority of detainees at the military prison at Guantánamo Bay have been Yemenis. In the 1990s, Osama bin Laden’s bodyguards were recruited from Yemen, where radical imams provided money and other help for jihadists.Yemen was also the base for Anwar al-Awlaki, the charismatic English-speaking cleric who was killed in an American drone strike in September 2011.For several years, American counterterrorism officials have viewed a cooperative Yemeni government as integral to dismantling Al Qaeda in the Arabian Peninsula. In 2011, Michael E. Leiter, then the director of the National Counterterrorism Center, called the group “probably the most significant risk to the U.S. homeland.”When the Arab Spring and pro-democracy demonstrations hit Yemen in early 2011, American officials struggled to manage their relationship with Mr. Saleh while still appearing to support the democracy advocates.Mr. Saleh was eventually removed from power, and the Obama administration voiced confidence in his successor and increased aid to the country. Worries that a new president would prove less willing to cooperate with American counterterrorism efforts in the country faded as Mr. Hadi continued the previous government’s policies.This year alone, the United States has carried out 11 airstrikes in Yemen, according to The Long War Journal, a website that tracks drone strikes.But Mr. Hadi must maintain a delicate balance at home, where there is increased public resentment about American killings — especially those that cause civilian casualties.