DAKAR, Senegal —  As a freshman senator from Illinois, Barack Obama told a packed auditorium in Kenya’s capital, “I want you all to know that as your ally, your friend and your brother, I will be there in every way I can.”But he will not be there. President Obama, who Wednesday began his second trip to sub-Saharan Africa since taking office, will skip his father’s homeland once again, a reflection of the many challenges that his administration has faced in trying to make a lasting imprint across the continent.Despite decades of American investment to promote stability in the volatile region of East Africa, Kenya just elected a president indicted by the International Criminal Court, accused of bankrolling death squads driven by ethnic rivalry. It was the outcome that Washington had desperately tried to avoid, and Mr. Obama’s advisers determined that a photo op of the American president shaking hands with a man awaiting trial was not one they needed.“It just wasn’t the best time for the president to travel to Kenya at this point,” said Benjamin J. Rhodes, Mr. Obama’s deputy national security adviser.For Africans across the continent, the election of an African-American president signaled a transformative moment in their relationship with the United States, one that would usher in a special understanding of their hopes and needs.But Mr. Obama’s own aspirations for changing Africa have been strained by security threats that have been mounting across vast stretches of its territory, by the spotty human rights records of nations that the United States has worked with to contain them — and by the president’s notable absences from the continent where his father was born.His two immediate predecessors in the White House made big gambles and left large legacies on the continent, but Mr. Obama has struggled to gain much traction on his stated aims in Africa: consolidating democracy, protecting women’s rights and reducing hunger. Some wonder whether this trip may be his best opportunity.“This is the last chance for the administration to salvage an Africa legacy,” said Todd Moss, a senior fellow of the Center for Global Development, a research group in Washington. “But it is very late in the day.”Mr. Obama’s only previous visit to sub-Saharan Africa as president was a brief stop in Ghana in 2009, despite the heightened economic and strategic stakes at play on the continent, home to some of the world’s fastest-growing economies and some of its most vexing security problems.China’s top leaders, by contrast, have busily traveled to dozens of African countries in recent years, investing billions of dollars in natural resources, building infrastructure on a vast scale and giving rise to criticism that the United States is ceding a rising region.Mr. Obama’s aides acknowledged the breadth of activity by China and other nations, but they said the president’s trip would deliver a message that the United States intended to “be present” in matters concerning Africa.“We can send a signal of increased U.S. engagement through this trip,” said Mr. Rhodes, the deputy national security adviser.As the president flew to Senegal on Wednesday to begin a tour that will also take him to South Africa and Tanzania, the White House press secretary, Jay Carney, said the administration’s approach to Africa was similar to the one it had taken toward Asia, where Mr. Obama has insisted on greater attention and investment.The Obama administration has spent billions of dollars on aid to Africa every year, building on a rapid expansion under President George W. Bush. And while Mr. Obama’s achievements in Africa may not always be flashy, they are not inconsiderable, said J. Stephen Morrison, an analyst at the Center for Strategic and International Studies.“There has been no big vision, big-ticket stuff, but there is plenty of senior-level, grind-it-out diplomacy,” Mr. Morrison said, adding that Mr. Obama has made Mr. Bush’s AIDS and malaria initiatives much more efficient and effective. He also cited the administration’s vital role in improving Somalia, a country whose troubles have bedeviled several American presidents.For many, Mr. Obama’s presence has been more evident on the battlefield. He pushed for the NATO military campaign that helped topple Col. Muammar el-Qaddafi of Libya, launched deadly strikes against extremists in Somalia, spent hundreds of millions of dollars to train African armies to fight Islamist militancy across the Sahara and set up a drone base in Niger — all while continuing to support less-than-democratic allies like Ethiopia and Uganda.Angry over the administration’s antiterrorism policies, a “NO-bama” coalition of lawyers, students and trade unions in South Africa is promising a National Day of Action on Friday, the day the president is expected to arrive there. Student groups say they will protest when Mr. Obama is scheduled to receive an honorary degree. The South African Muslim Lawyers Association delivered a 600-page brief to the South African government that it called the “Obama Docket,” demanding that the president be arrested for war crimes when he lands in the country.Mr. Obama, the first American president with personal roots in this continent, remains immensely popular in Africa, and any visit from him has deep symbolism and historic meaning. But because his trips emphasize the loftier side of his ambitions for the continent — focusing on ideals, not the complex realities that often undermine them — his itinerary options are somewhat limited.Beyond the political tension with Kenya, many other African nations are essentially off limits. Safety issues, deeply flawed elections, human rights violations and logistical roadblocks often make visits impossible, unworkable or undesirable.Nigeria is the most populous country in Africa and an important strategic partner for the United States. But many Nigerian officials and human rights groups have accused the nation’s army of summary executions and other abuses in its battle with Boko Haram, a militant group that has been waging a war against the government.Ethiopia has been a close ally in combating Islamist militants in the volatile Horn of Africa and is a major recipient of United States aid. But its government is considered one of Africa’s most repressive, ruling out it, too, as a presidential stop.“Senegal, Tanzania and South Africa, those are good, solid, safe choices,” Mr. Morrison said. “They don’t have the edge you might get if you’d chosen a few other alternatives.”For Tanzania, Mr. Obama’s arrival means the chance to play host to arguably the two most powerful people on the planet in just over three months. In March, Xi Jinping visited the nation’s largest city, Dar es Salaam, on his first tour abroad as China’s new president, promising aid, scholarships and the transfer of new technology. Mr. Obama will also find himself following in Mr. Xi’s recent footsteps in South Africa.But for those in countries that are not a destination, Mr. Obama’s weeklong trip will be a reminder of how much of the continent he has missed.“We expected him to come,” said Paul Okindu, 40, one of five men working at Obama Shoe Shine in Nairobi, Kenya. “We are so disheartened that he decided not to.”The local media in Kenya have been referring to the decision to skip Kenya as a “snub” of President Uhuru Kenyatta, whose office announced that he would travel to Russia, China and Japan while Mr. Obama was in Africa.“There are some who are very disappointed that he is trying to embarrass his motherland and show them they are not that important,” said Gerishon Ikiara, a senior lecturer at the Institute of Diplomacy and International Studies at the University of Nairobi. “The message is quite clear that he is not happy with Kenya.”Caroline Odengo, 34, a teacher in the Nairobi slum of Kibera, said the challenges that Kenya faced were all the more reason for Mr. Obama to visit. “We’re waiting for his voice,” she said.