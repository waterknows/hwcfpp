JAKARTA, Indonesia — A last-ditch effort by the Philippines, involving a human trafficking case and frantic personal phone calls by the president, led to a dramatic deal with Indonesia that plucked a Philippine woman from a firing squad moments before she was to join eight other prisoners at a mass execution early Wednesday.The details of the developments that saved the woman, Mary Jane Veloso, who was convicted of smuggling heroin into Indonesia in 2010, and of the execution of the eight other prisoners, who sang “Amazing Grace” as the fatal shots were fired, began to emerge in interviews and public statements on Wednesday.By Wednesday night, Ms. Veloso had been transferred to a prison in Yogyakarta from a prison island off the southern coast of Java, where she had been scheduled to die. It remained unclear, however, how long her reprieve would last and what the Indonesian government planned to do with her.Even as Filipinos celebrated what appeared to be a temporary salvation for Ms. Veloso, other countries assailed Indonesia for the execution of the other eight convicts. It was the second such mass execution this year and part of a campaign by President Joko Widodo to combat what he has called a national drug emergency.Australia withdrew its ambassador on Wednesday in protest of the execution of two Australians, Andrew Chan, 31, and Myuran Sukumaran, 34, which Prime Minister Tony Abbott called “cruel and unnecessary.”President Dilma Rousseff of Brazil issued a statement expressing “deep consternation” at the execution of Rodrigo Gularte, 42, a Brazilian whose history of schizophrenia and bipolar disorder, his lawyers argued, should have disqualified him from criminal prosecution under Indonesian law.Brazil had already withdrawn its ambassador over the execution of a Brazilian citizen in the first batch of executions in January.Indonesian officials have angrily rejected the criticism, insisting the punishments were within its sovereign rights. They have said that they will carry out more executions this year with the goal of clearing death row of 64 drug convicts.Analysts say the parade of executions risks making Indonesia an outlier in its use of capital punishment, putting it in a judicial league with Iran and Saudi Arabia, even as it has made recent strides toward political democracy.“These executions have thrown a harsh light on the criminal justice system,” said Dave McRae, a senior research fellow with the Asia Institute at the University of Melbourne who has studied Indonesia’s use of the death penalty.Advocates for the convicts have argued that the Indonesian courts were corrupt, saying that two of them were offered lighter sentences in exchange for bribes, and that some defendants had inadequate legal representation.“The Indonesian government hasn’t done anything to show it takes the irregularities seriously,” Mr. McRae said. “We have not seen anything substantially addressed.”Indonesia’s intransigence made it all the more surprising that Ms. Veloso was granted a temporary reprieve.As time was running out for the prisoners, pressure was mounting in the Philippines this week for the government to save Ms. Veloso, a 30-year-old mother of two who was arrested in 2010 at the airport in Yogyakarta with more than five pounds of heroin hidden in her suitcase. She claims that she did not know the drugs were in the bag, and that she was on her way to work as a maid in Indonesia.On Monday, the Philippine authorities charged Ms. Veloso’s former neighbor, Maria Kristina Sergio, and two other people, with human trafficking and fraud in connection with the case. Ms. Sergio is accused of arranging Ms. Veloso’s trip to Indonesia, and officials say she and the two others may have been involved in the drug smuggling operation.Ms. Sergio surrendered to the police in the northern Philippine province of Nueva Ecija on Tuesday, and Philippine officials said they needed Ms. Veloso as a witness in the trafficking case.Her testimony “could shed light on how a criminal syndicate duped her into being an unwitting accomplice or courier in their human and drug trafficking activities,” Sonny Coloma, a presidential spokesman, said on Wednesday.Philippine officials described a desperate rush to call and text senior Indonesian officials on Tuesday to tell them of Ms. Sergio’s surrender and to plead for a reprieve for Ms. Veloso. At one point Tuesday night, President Benigno S. Aquino III, not having reached Mr. Joko directly, broke with protocol by calling the Indonesian foreign minister to explain the new developments in the case.Instead of executing Ms. Veloso, “why not try to go for the bigger fish, hit at the bigger organization that is doing this,” Jose Rene Almendras, a senior adviser to Mr. Aquino, explained.The strategy worked. Mr. Joko discussed the case at an afternoon meeting with the labor minister, the cabinet secretary and representatives of nongovernmental organizations, according to Anis Hidayah, executive director of the organization Migrant Care, who attended the meeting.On Tuesday night, Mr. Joko met with Attorney General H. M. Prasetyo and the national police chief, Mr. Prasetyo on said Wednesday. At the end of the meeting, Mr. Joko decided to delay the execution.Officials from the attorney general’s office and the presidential palace did not return phone calls or reply to text messages regarding the case.Late Tuesday night, Ms. Veloso was in an isolation cell in Pasir Putih prison on the island of Nusa Kambangan, about to be driven to the execution site.“It was at the last minute — we were actually in the cells for the final moments when word came,” said Father Charles Burrows, a Roman Catholic priest who was counseling Mr. Gularte. “They took her out of the cell pretty quick.”Mr. Almendras said it was not clear how long Ms. Veloso’s execution had been delayed, or whether she could be returned to the Philippines to testify.Mr. Prasetyo said in a news conference on Wednesday that she would not be allowed to leave Indonesia and that Philippine officials would have to take her testimony here. He also made it clear that her execution had only been delayed, not canceled.The other eight prisoners were not so lucky.Shortly before 11 p.m. on Tuesday, they were taken from their cells to a wooded area. Contrary to previously published plans that they would be shot in pairs, all eight were taken out as a group.The prisoners all declined offers of blindfolds and prayed as they were tied to metal poles, Mr. Burrows said, while he and other religious counselors waited in a tent about 60 feet away.“It was too dark to see them,” he said. “There was only a flashlight pointed on their chests for the shooters” to take aim.The prisoners began singing “Amazing Grace.” After the first verse, those who did not remember the words hummed. At 12:35 a.m., eight separate firing squads, 12 riflemen for each prisoner, fired at once.Mr. Prasetyo said all eight convicts were pronounced dead within 30 minutes.“The executions have been successfully implemented, perfectly,” he said at a news conference on Wednesday. “All worked, no misses.”