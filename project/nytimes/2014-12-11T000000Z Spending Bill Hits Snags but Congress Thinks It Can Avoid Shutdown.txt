WASHINGTON —  Congress limped Wednesday toward a rare bipartisan agreement on a $1.1 trillion spending bill to keep most of the government operating through next year, but dysfunction once again threatened to derail it.The fissures emerged as lawmakers in both parties balked over details in the 1,600-page bill, including one provision that rolled back Wall Street regulations and could deliver a financial bounty to big banks, and another that would allow big donors to wield even more influence over political parties. More conservative Republicans continued to argue that the bill also did not do enough to try to scale back President Obama’s executive action on immigration.Even with the resistance, Republican leaders and some Democrats expressed confidence that a government shutdown would be averted. Senator Barbara A. Mikulski, Democrat of Maryland, who as the chairwoman of the Senate Appropriations Committee helped to negotiate a deal, called the spending plan a “monumental achievement” in an era of seemingly intractable partisan divides.The objections mean that Congress will probably need to pass a short-term funding measure to keep government operations running beyond Thursday — the current deadline — while the final disputes are sorted out, even as Republicans expressed confidence that the spending agreement would ultimately be approved.House Speaker John A. Boehner will need Democratic votes to pass the bill, as many of his more conservative members are refusing to support it because of the president’s unilateral decision to defer the deportations of as many as five million undocumented immigrants.But the spending agreement showed signs of friction when Representative Nancy Pelosi, Democrat of California and the minority leader, told her members in a closed-door session that she had called the speaker and signaled that Democrats could have difficulty supporting the final deal if the financial regulation and political contribution provisions were not changed.“These provisions are destructive to middle-class families and to the practice of our democracy,” Ms. Pelosi said in a statement. By Wednesday night, Democratic opposition to the bill had hardened over the two provisions. Mr. Boehner told Ms. Pelosi that Republicans were not willing to budge on those issues, said people with knowledge of the discussions, and that if House Democrats were not willing to provide the necessary votes, they should be prepared to vote on a short-term measure that would push the spending package into early next year, when Republicans will have more leverage.Mr. Boehner and his leadership team nonetheless urged Republicans to vote for the bill, saying they would fight Mr. Obama over immigration in February, when the funding for the Department of Homeland Security is scheduled to run out.“Why in the world would you pick a bar fight three weeks before the end of the year, when your buddies are coming on Jan. 1?” said Representative Tom Cole, Republican of Oklahoma.The bipartisan package was completed in the aftermath of the midterm elections in November, when Democrats lost their majority in the Senate next year and lost seats in the House as well. In negotiations on the spending bill, Democratic aides said that their chief victories came not from writing new policies into the legislation, but from beating back Republican efforts to dismantle many of Mr. Obama’s policies.Nonetheless, by Wednesday, the outcry from the left was unmistakable, especially over the provision that would roll back a part of the Dodd-Frank Act of 2010 that limits the ability of big banks to trade certain financial instruments known as swaps — contracts that allow the banks to hedge their risks or to speculate.Liberal Democrats, including Senators Sherrod Brown of Ohio and Elizabeth Warren of Massachusetts, assailed the proposed change. “This giveaway to Wall Street would open the door to future bailouts funded by American taxpayers,” Mr. Brown said. “It has been just six years since risky financial practices put our economy on the brink of collapse. This provision, originally written by lobbyists, has no place in a must-pass spending bill.”But House Republicans, in a summary of the bill, said the provision would help the economy and “protect farmers and other commodity producers from having to put down excessive collateral to get a loan” or expand their businesses.The legislation also included a rider that would allow big donors to contribute significantly more to national political parties, creating new designated accounts to pay for presidential nominating conventions, legal fees and the cost of buying or renovating office space.Donors could write checks to the new accounts three times as large as the contributions normally allowed to party committees. Initial calculations suggested that the bill would expand the amount that any one person could donate to party committees to more than $777,000 each year from what is now a maximum of $97,200.Neither party’s lawmakers would take responsibility for inserting the provision.“Success has many fathers,” said a Republican who supports it, who spoke candidly on the condition of anonymity. “Democrats love this, too.”Other provisions in the bill would stop the Fish and Wildlife Service from listing the sage grouse as an endangered or threatened species; prohibit the government from regulating the lead content of ammunition or fishing tackle; and prevent the Army Corps of Engineers from regulating farm ponds and irrigation ditches under the Clean Water Act.The spending bill would also require the Agriculture Department to include white potatoes among the foods that can be purchased with vouchers in the Special Supplemental Nutrition Program for Women, Infants and Children. White potatoes are excluded from the supplemental food package by a federal rule, but Senator Susan Collins, a Republican from Maine who picked potatoes as a young girl, said the rule was not based on sound science.Another portion of the bill says that no federal or local funds can be used “to enact any law, rule or regulation to legalize or otherwise reduce penalties associated with the possession, use or distribution” of marijuana in the District of Columbia. This would clearly prevent the city from allowing marijuana sales at retail stores or dispensaries like those in Colorado.Before Congress finishes work on the bill, lawmakers said, they also plan to add sweeping changes in pension law that would allow certain multiemployer pension plans to cut benefits of current retirees. Democrats and labor unions are deeply divided over the proposal, which has support from many Republicans.On Wednesday, the House also overwhelming approved legislation extending the federal backstop for terrorism insurance, a major win for developers in Lower Manhattan and other areas considered targets of terrorism attacks. And the big bipartisan vote came despite the Republican addition of a different provision rolling back regulations in the Dodd-Frank law. That vote will make it much more difficult for the Senate to oppose the measure, even though Senate Democrats and the Obama administration opposed inclusion of the regulatory rollback.